var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},__rest=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(r[n[o]]=t[n[o]])}return r},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","query-string"],t)}(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=__importDefault(t("query-string")),r=function(){function t(t){void 0===t&&(t={}),this._options={method:"GET",async:!0},this._async=!0,this._xhr=new XMLHttpRequest,this._pending=!1,this._callbackResponce=[],this._callbackError=[],this._options=__assign({},this._options,t),this._xhr.onload=this.handlerLoad(this)}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(t){this._options=__assign({},this._options,t)},enumerable:!0,configurable:!0}),t.prototype.setDataBody=function(e,t){Array.isArray(t)?t.forEach(function(t){return e.body.append(e.key,t)}):e.body.append(e.key,t)},t.prototype.handlerLoad=function(r){var n={};return function(){if((this.status<400||500<=this.status)&&200!==this.status)r.handlerError(new Error(this.status+" "+this.statusText));else if((n=JSON.parse(this.responseText)).errors){if("object"==typeof n.errors){var t=Object.keys(n.errors);if(t.length){var e={};t.forEach(function(t){return e[t]=n.errors[t].msg}),n=e}}r.handlerError(new Error(n.errors))}else r.handlerSuccess(n)}},t.prototype.handlerError=function(t){this._pending=!1,this._callbackError.reduce(function(t,e){return Array.isArray(t)?e(t.slice()):e("object"==typeof t?__assign({},t):t)},t)},t.prototype.handlerSuccess=function(t){this._pending=!1,this._callbackResponce.reduce(function(t,e){return Array.isArray(t)?e(t.slice()):e("object"==typeof t?__assign({},t):t)},t)},t.prototype.request=function(t,e){var r=e.query,n=void 0===r?{}:r,o=__rest(e,["query"]);this._pending||(this._pending=!0,this._xhr.open(this._options.method,t+"?"+s.default.stringify(n),this._async),this._xhr.send(o.body))},t.prototype.get=function(t,e,r){var n=__rest(e,[]);return this._options.method=r||"GET",this.request(t,n),this},t.prototype.post=function(t,e,r){var n=__rest(e,[]),o=n.files,s=n.data,i={body:new FormData};if(this._options.method=r||"POST",this._xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o){var a=function(e){o[e].forEach(function(t){return i.body.append(e,t)})};for(var u in o)a(u)}if(s)for(var u in s)this.setDataBody({body:i.body,key:u},s[u]);return this.request(t,i),this},t.prototype.put=function(t,e){var r=__rest(e,[]);return this.post(t,r,"PUT")},t.prototype.delete=function(t,e){var r=__rest(e,[]);return this.get(t,r,"DELETE")},t.prototype.then=function(t){return this._callbackResponce.push(t),this},t.prototype.catch=function(t){return this._callbackError.push(t),this},t.prototype.abort=function(){return this._xhr.abort(),this},t}(),n={get:function(t,e){return(new r).get(t,e)},post:function(t,e){return(new r).post(t,e)},put:function(t,e){return(new r).put(t,e)},delete:function(t,e){return(new r).delete(t,e)}};e.http=n,e.default=r});